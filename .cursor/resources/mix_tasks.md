# Mix Tasks Reference for Ash 3.5.13
**Complete command reference for Ash Framework and ecosystem**

## Core Ash Tasks

### Project Management
- **`mix ash.setup`** - Run all setup tasks for extensions across all domains and resources
- **`mix ash.migrate`** - Run all migration tasks for extensions across all domains and resources  
- **`mix ash.reset`** - Run all tear down & setup tasks (complete reset of all data layers)
- **`mix ash.rollback`** - Run all rollback tasks for extensions across all domains and resources
- **`mix ash.tear_down`** - Run all tear down tasks for extensions across all domains and resources

### Code Generation & Development
- **`mix ash.codegen`** - Run all codegen tasks for extensions across all domains and resources
- **`mix ash.extend`** - Add extensions to specified domain/resource
- **`mix ash.patch.extend`** - Add extensions to specified domain/resource (patch version)

### Installation
- **`mix ash.install`** - Install Ash into a project (should be called with `mix igniter.install ash`)

## Resource & Domain Generation

### Core Generators
- **`mix ash.gen.domain`** - Generate an Ash.Domain module
- **`mix ash.gen.resource`** - Generate and configure an Ash.Resource
- **`mix ash.gen.base_resource`** - Generate a base resource module for consistency across resources

### Custom Components
- **`mix ash.gen.change`** - Generate a custom change module
- **`mix ash.gen.preparation`** - Generate a custom preparation module  
- **`mix ash.gen.validation`** - Generate a custom validation module
- **`mix ash.gen.custom_expression`** - Generate a custom expression module
- **`mix ash.gen.enum`** - Generate an Ash.Type.Enum

## Documentation & Visualization

### Analysis Tools
- **`mix ash.generate_policy_charts`** - Generate Mermaid Flow Chart for resource policies
- **`mix ash.generate_resource_diagrams`** - Generate Mermaid Resource Diagrams for each domain
- **`mix ash.generate_livebook`** - Generate a Livebook for each Ash domain

## Extension-Specific Tasks

### AshPostgres (Database Layer)
- **`mix ash_postgres.install`** - Install AshPostgres (should be run with `mix igniter.install ash_postgres`)
- **`mix ash_postgres.generate_migrations`** - Generate migrations and store resource snapshots
- **`mix ash_postgres.migrate`** - Run repository migrations for all domains
- **`mix ash_postgres.rollback`** - Roll back repository migrations for all domains
- **`mix ash_postgres.create`** - Create repository storage
- **`mix ash_postgres.drop`** - Drop repository storage for specified domains
- **`mix ash_postgres.gen.resources`** - Generate resources based on existing database schema
- **`mix ash_postgres.setup_vector`** - Set up pgvector for AshPostgres
- **`mix ash_postgres.squash_snapshots`** - Clean snapshots folder, leaving only one per resource

### AshAuthentication (User Authentication)
- **`mix ash_authentication.install`** - Install AshAuthentication (invoke with `mix igniter.install ash_authentication`)
- **`mix ash_authentication.add_strategy`** - Add authentication strategies to user resource
- **`mix ash_authentication.phoenix.routes`** - Print all routes generated by AshAuthentication Phoenix
- **`mix ash_authentication_phoenix.install`** - Install AshAuthenticationPhoenix (invoke with `mix igniter.install ash_authentication_phoenix`)

### AshPhoenix (Web Integration)
- **`mix ash_phoenix.install`** - Install AshPhoenix (should be called with `mix igniter.install ash_phoenix`)
- **`mix ash_phoenix.gen.html`** - Generate controller and HTML views for existing Ash resource
- **`mix ash_phoenix.gen.live`** - Generate LiveViews for specified domain and resource

### AshAdmin (Admin Interface)
- **`mix ash_admin.install`** - Install AshAdmin

### AshJsonApi (API Layer)
- **`mix ash_json_api.install`** - Install AshJsonApi (should be run with `mix igniter.install ash_json_api`)
- **`mix ash_json_api.routes`** - Print all routes by AshJsonApiRouter

### AshOban (Background Jobs)
- **`mix ash_oban.install`** - Install AshOban and Oban
- **`mix ash_oban.set_default_module_names`** - Set module names to default values for triggers and scheduled actions

### AshAI (AI Integration)
- **`mix ash_ai.install`** - Install AshAi (call with `mix igniter.install ash_ai`, requires igniter)
- **`mix ash_ai.gen.chat`** - Generate resources and views for conversational UI backed by ash_postgres and ash_oban
- **`mix ash_ai.gen.mcp`** - Set up an MCP server for your application

## Custom Project Aliases

This project defines custom mix aliases for streamlined development:

- **`mix setup`** - Alias for `deps.get, ash.setup, assets.setup, assets.build, run priv/repo/seeds.exs`
- **`mix test`** - Alias for `ash.setup --quiet, test`
- **`mix phx.routes`** - Alias for `phx.routes, ash_authentication.phoenix.routes`

## Common Usage Patterns

### New Project Setup
```bash
# 1. Install Ash and core extensions
mix igniter.install ash
mix igniter.install ash_postgres
mix igniter.install ash_phoenix

# 2. Create your first domain and resource
mix ash.gen.domain MyApp.Accounts
mix ash.gen.resource MyApp.Accounts.User \
  --default-actions read,create,update,destroy \
  --uuid-primary-key id \
  --attribute email:string:required:public

# 3. Generate and run migrations
mix ash_postgres.generate_migrations
mix ash_postgres.migrate
```

### Daily Development Workflow
```bash
# Generate migrations after resource changes
mix ash.codegen
mix ash_postgres.generate_migrations
mix ash_postgres.migrate

# Reset database during development
mix ash.reset

# Generate LiveViews for new resources
mix ash_phoenix.gen.live MyApp.Accounts User users
```

### Debugging & Analysis
```bash
# Visualize your resource relationships
mix ash.generate_resource_diagrams

# Debug authorization policies
mix ash.generate_policy_charts MyApp.Accounts.User

# Generate interactive documentation
mix ash.generate_livebook
```

### Adding Authentication
```bash
# Install authentication
mix igniter.install ash_authentication
mix igniter.install ash_authentication_phoenix

# Add magic link strategy to existing user resource
mix ash_authentication.add_strategy MyApp.Accounts.User magic_link

# View authentication routes
mix ash_authentication.phoenix.routes
```

## Best Practices

1. **Always use igniter.install** for extension installation
2. **Run ash.codegen** after any resource/domain changes
3. **Generate migrations** immediately after resource modifications
4. **Use --dry-run** flags to preview changes before applying
5. **Leverage aliases** defined in mix.exs for common workflows
6. **Generate documentation** regularly to keep team aligned

## Version Compatibility

All tasks listed are compatible with:
- **Ash Framework**: 3.5.13
- **Phoenix**: 1.7.21
- **LiveView**: 1.0.14
- **Elixir**: Latest stable

---

*This reference covers all mix tasks available in Ash 3.5.13 and ecosystem packages. For the latest task documentation, run `mix help` or `mix help <task_name>` for specific usage details.* 